define(['jquery','Magento_Ui/js/modal/modal','ko','mage/translate','mage/cookies','jquery/jquery-storageapi'],function($,modal,ko,$t){'use strict';var kladr=ko.observable();var refreshPage=ko.observable(false);var city=ko.observable('');var getCity=function(){var savedCity=$.localStorage.get('kt-geoip-city');return(savedCity!=null)?savedCity:$t('Moscow');};city(getCity());return{modalWindow:null,city:city,kladr:kladr,refreshPage:refreshPage,getCity:getCity,createPopUp:function(element){this.modalWindow=element;var options={'type':'popup','modalClass':'city-select','responsive':true,'innerScroll':true,'trigger':'.kt-city','buttons':[]};return modal(options,$(this.modalWindow));},showModal:function(){$(this.modalWindow).modal('openModal');},setKladr:function(kladr){this.kladr(kladr);$.mage.cookies.set('kt-geoip-kladr',kladr);}}});